from src.sanitize import sanitize_metar


def test_sanitize_metar():
    """Test sanitize metar to use it in TAF-VER software."""
    metars = [
        "MROC 150800Z 08002KT 9999 FEW005 BKN180 20/19 A3000 NOSIG=",
        "METAR MROC 150700Z 08005KT 8000 2000SW BCFG FEW001 BKN005 19/19 A3003 RMK VEL MAX VTO 10KT NOSIG=",
        "METAR MROC 150612Z 17002KT 3000 0500SW -RA BR SCT002 BKN010 19/19 A3004 NOSIG=",
        "METAR MROC 150600Z 19003KT 9999 4500SW FEW005 BKN080 19/19 A3004 NOSIG=",
        "METAR MROC 150500Z VRB02KT 9999 FEW010 BKN120 20/19 A3006 NOSIG",
        "METAR MROC 150400Z 26003KT 200V340 9999 FEW005 BKN045 20/19 A3007 RMK Q1011 NOSIG",
        "MROC 150300Z COR VRB01KT 9999 -RA FEW005 BKN100 20/19 A3006 NOSIG",
        "MROC 150200Z VRB01KT 9999 -RA BKN010 20/19 A3006 NOSIG",
        "MROC 150100Z 27004KT 5000 -RA FEW005 BKN035 20/19 A3004 NOSIG",
        "SPECI MROC 150020Z COR23004KT 3000 RA BR FEW004 BKN015 20/19 A3003 NOSIG=",
        "METAR MROC 150000Z 22006KT 3000 -RA BR FEW004 BKN015 20/20 A3002 NOSIG=",
        "SPECI MROC 142344Z 24004KT 5000 -RA BR FEW004 BKN015 20/20 A3002 NOSIG=",
        "MROC 142300Z 23003KT 9999 -RA FEW010 SCT035 OVC120 21/20 A3001 NOSIG=",
        "MROC 142200Z 29008KT 230V310 9999 BKN015 OVC100 21/19 A3000 RESHRA NOSIG=",
        "MROC 142106Z 25009KT 9999 -SHRA FEW020TCU BKN025 OVC100 22/20 A2999 TEMPO 5000",
    ]

    sanitized_metars = [
        "METAR MROC 150800Z 08002KT 9999 FEW005 BKN180 20/19 A3000=",
        "METAR MROC 150700Z 08005KT 8000 FG FEW001 BKN005 19/19 A3003=",
        "METAR MROC 150612Z 17002KT 3000 RA FG SCT002 BKN010 19/19 A3004=",
        "METAR MROC 150600Z 19003KT 9999 FEW005 BKN080 19/19 A3004=",
        "METAR MROC 150500Z VRB02KT 9999 FEW010 BKN120 20/19 A3006=",
        "METAR MROC 150400Z 26003KT 9999 FEW005 BKN045 20/19 A3007=",
        "METAR MROC 150300Z VRB01KT 9999 RA FEW005 BKN100 20/19 A3006=",
        "METAR MROC 150200Z VRB01KT 9999 RA BKN010 20/19 A3006=",
        "METAR MROC 150100Z 27004KT 5000 RA FEW005 BKN035 20/19 A3004=",
        "METAR MROC 150020Z 23004KT 3000 RA FG FEW004 BKN015 20/19 A3003=",
        "METAR MROC 150000Z 22006KT 3000 RA FG FEW004 BKN015 20/20 A3002=",
        "METAR MROC 142344Z 24004KT 5000 RA FG FEW004 BKN015 20/20 A3002=",
        "METAR MROC 142300Z 23003KT 9999 RA FEW010 SCT035 OVC120 21/20 A3001=",
        "METAR MROC 142200Z 29008KT 9999 BKN015 OVC100 21/19 A3000=",
        "METAR MROC 142106Z 25009KT 9999 RA FEW020 BKN025 OVC100 22/20 A2999=",
    ]

    for i, metar in enumerate(metars):
        metar = sanitize_metar(metar, "MROC")
        assert metar == sanitized_metars[i]
